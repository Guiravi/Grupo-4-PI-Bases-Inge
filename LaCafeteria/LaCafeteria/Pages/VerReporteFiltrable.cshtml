@page
@model LaCafeteria.Pages.VerReporteFiltrableModel
@{
    ViewData["Title"] = "Reportes de la comunidad";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<head>
    <style>
        .panelReporte {
            border: solid 2px black;
            border-radius: 3%;
            margin: 10px;
            padding: 5px;
            background-color: #b7d4c7;
        }

        #chartDivDonut {
            width: 100%;
            height: 450px;
        }

        .chartDivBarras {
            width: 90%;
            height: 400px;
        }
    </style>

    <script src="https://www.amcharts.com/lib/4/core.js"></script>
    <script src="https://www.amcharts.com/lib/4/charts.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/kelly.js"></script>
    <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
</head>

<h2>Reportes de la comunidad</h2>

<div class="container">
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#distMiembros">Distribución de miembros</a></li>
        <li><a data-toggle="tab" href="#distRolesArt">Distribución de roles y artículos</a></li>
    </ul>

    <div class="tab-content">
        <div id="distMiembros" class="tab-pane fade in active">
            <div class="row">
                <h2 class="text-center">Distribución de miembros</h2>
            </div>
            <div class="row">
                <div class="col-md-3">


                    <div class="row panelReporte" id="donutPanel">
                        <h3 class="text-center">Miembros por país</h3>
                        <div id="chartDivDonut"></div>
                    </div>

                </div>
                <div class="col-md-9">
                    <div class="row panelReporte" id="habilidadesPanel" style="height: 50%;">
                        <div id="chartDivHabilidadesIdiomas" class="center-block chartDivBarras"></div>
                    </div>
                    <div class="row panelReporte" id="pasatiemposPanel" style="height: 50%;">
                        <div id="chartDivHabilidadesPaises" class="center-block chartDivBarras"></div>
                    </div>
                    <div class="row panelReporte" id="habilidadesPanel" style="height: 50%;">
                        <div id="chartDivPasatiemposIdiomas" class="center-block chartDivBarras"></div>
                    </div>
                    <div class="row panelReporte" id="pasatiemposPanel" style="height: 50%;">
                        <div id="chartDivPasatiemposPaises" class="center-block chartDivBarras"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="distRolesArt" class="tab-pane fade">
            <div class="row">
                <h2 class="text-center">Distribución de roles y artículos</h2>
            </div>
        </div>
    </div>
</div>

<script>
    am4core.ready(function () {

        // Themes begin
        am4core.useTheme(am4themes_kelly);
        am4core.useTheme(am4themes_animated);
        // Themes end

        // Create chart instance
        var chart = am4core.create("chartDivDonut", am4charts.PieChart);
        
        

        // Add data
        chart.data = [{
            "country": "Lithuania",
            "litres": 501.9
        }, {
            "country": "Czech Republic",
            "litres": 301.9
        }, {
            "country": "Ireland",
            "litres": 201.1
        }, {
            "country": "Germany",
            "litres": 165.8
        }, {
            "country": "Australia",
            "litres": 139.9
        }, {
            "country": "Austria",
            "litres": 128.3
        }, {
            "country": "UK",
            "litres": 99
        }, {
            "country": "Belgium",
            "litres": 60
        }, {
            "country": "The Netherlands",
            "litres": 50
            }];


        // Set inner radius
        chart.innerRadius = am4core.percent(50);
        chart.legend = new am4charts.Legend();
        chart.legend.maxHeight = 200;
        chart.legend.scrollable = true;
        chart.legend.marginBottom = 20;

        // Add and configure Series
        var pieSeries = chart.series.push(new am4charts.PieSeries());
        pieSeries.dataFields.value = "litres";
        pieSeries.dataFields.category = "country";
        pieSeries.slices.template.stroke = am4core.color("#000");
        pieSeries.slices.template.strokeWidth = 1;
        pieSeries.slices.template.strokeOpacity = 1;
        pieSeries.labels.template.disabled = true;
        pieSeries.ticks.template.disabled = true;

        var label = pieSeries.createChild(am4core.Label);
        label.text = "Total:\n{values.value.sum}";
        label.fontSize = 16;
        label.textAlign = "middle";
        label.horizontalCenter = "middle";
        label.verticalCenter = "middle";


        // This creates initial animation
        pieSeries.hiddenState.properties.opacity = 1;
        pieSeries.hiddenState.properties.endAngle = -90;
        pieSeries.hiddenState.properties.startAngle = -90;

    }); // end am4core.ready()

    am4core.ready(function () {

        // Themes begin
        am4core.useTheme(am4themes_animated);
        // Themes end

        // Create chart instance
        var chart = am4core.create("chartDivHabilidadesIdiomas", am4charts.XYChart);
        var title = chart.titles.create();
        title.text = "Habilidades por idioma";
        title.fontSize = 25;
        title.marginBottom = 30;


        // Add data
        chart.data = [{
            "habilidades": "Cantar",
            "europe": 2.5,
            "namerica": 2.5,
            "asia": 2.1,
            "lamerica": 0.3,
            "meast": 0.2,
            "africa": 0.1
        }, {
            "habilidades": "Comer",
            "europe": 2.6,
            "namerica": 2.7,
            "asia": 2.2,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Saltar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Correr",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Bailar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Jugar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Hablar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }
        ];

        // Create axes
        var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
        categoryAxis.dataFields.category = "habilidades";
        categoryAxis.renderer.grid.template.location = 0;
        categoryAxis.renderer.minGridDistance = 30;


        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
        valueAxis.min = 0;
        valueAxis.renderer.grid.template.location = 0;

        // Create series
        function createSeries(field, name) {

            // Set up series
            var series = chart.series.push(new am4charts.ColumnSeries());
            series.name = name;
            series.dataFields.valueY = field;
            series.dataFields.categoryX = "habilidades";
            series.sequencedInterpolation = false;

            // Make it stacked
            series.stacked = true;

            // Configure columns
            series.columns.template.width = am4core.percent(60);
            series.columns.template.tooltipText = "[bold]{name}[/]\n[font-size:14px]{categoryX}: {valueY}";

            // Add label
            var labelBullet = series.bullets.push(new am4charts.LabelBullet());
            labelBullet.label.text = "{valueY}";
            labelBullet.locationY = 0.5;
            labelBullet.label.hideOversized = true;

            return series;
        }

        createSeries("europe", "Europe", false);
        createSeries("namerica", "North America", true);
        createSeries("asia", "Asia-Pacific", true);
        createSeries("lamerica", "Latin America", false);
        createSeries("meast", "Middle-East", true);
        createSeries("africa", "Africa", true);

        // Legend
        chart.legend = new am4charts.Legend();
        chart.legend.position = "bottom";
        chart.legend.maxHeight = 60;  
        chart.legend.scrollable = true;
        chart.legend.marginBottom = 10;

    }); // end am4core.ready()

    am4core.ready(function () {

        // Themes begin
        am4core.useTheme(am4themes_animated);
        // Themes end

        // Create chart instance
        var chart = am4core.create("chartDivHabilidadesPaises", am4charts.XYChart);
        var title = chart.titles.create();
        title.text = "Habilidades por país";
        title.fontSize = 25;
        title.marginBottom = 30;
        

        // Add data
        chart.data = [{
            "habilidades": "Cantar",
            "europe": 2.5,
            "namerica": 2.5,
            "asia": 2.1,
            "lamerica": 0.3,
            "meast": 0.2,
            "africa": 0.1
        }, {
            "habilidades": "Comer",
            "europe": 2.6,
            "namerica": 2.7,
            "asia": 2.2,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Saltar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Correr",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Bailar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Jugar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Hablar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }
        ];

        // Create axes
        var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
        categoryAxis.dataFields.category = "habilidades";
        categoryAxis.renderer.grid.template.location = 0;
        categoryAxis.renderer.minGridDistance = 30;


        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
        valueAxis.min = 0;
        valueAxis.renderer.grid.template.location = 0;

        // Create series
        function createSeries(field, name) {

            // Set up series
            var series = chart.series.push(new am4charts.ColumnSeries());
            series.name = name;
            series.dataFields.valueY = field;
            series.dataFields.categoryX = "habilidades";
            series.sequencedInterpolation = false;

            // Make it stacked
            series.stacked = true;

            // Configure columns
            series.columns.template.width = am4core.percent(60);
            series.columns.template.tooltipText = "[bold]{name}[/]\n[font-size:14px]{categoryX}: {valueY}";

            // Add label
            var labelBullet = series.bullets.push(new am4charts.LabelBullet());
            labelBullet.label.text = "{valueY}";
            labelBullet.locationY = 0.5;
            labelBullet.label.hideOversized = true;

            return series;
        }

        createSeries("europe", "Europe", false);
        createSeries("namerica", "North America", true);
        createSeries("asia", "Asia-Pacific", true);
        createSeries("lamerica", "Latin America", false);
        createSeries("meast", "Middle-East", true);
        createSeries("africa", "Africa", true);

        // Legend
        chart.legend = new am4charts.Legend();
        chart.legend.position = "bottom";
        chart.legend.maxHeight = 60;
        chart.legend.scrollable = true;
        chart.legend.marginBottom = 10;

    }); // end am4core.ready()

    am4core.ready(function () {

        // Themes begin
        am4core.useTheme(am4themes_animated);
        // Themes end

        // Create chart instance
        var chart = am4core.create("chartDivPasatiemposIdiomas", am4charts.XYChart);
        var title = chart.titles.create();
        title.text = "Pasatiempos por idioma";
        title.fontSize = 25;
        title.marginBottom = 30;


        // Add data
        chart.data = [{
            "habilidades": "Cantar",
            "europe": 2.5,
            "namerica": 2.5,
            "asia": 2.1,
            "lamerica": 0.3,
            "meast": 0.2,
            "africa": 0.1
        }, {
            "habilidades": "Comer",
            "europe": 2.6,
            "namerica": 2.7,
            "asia": 2.2,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Saltar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Correr",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Bailar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Jugar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Hablar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }
        ];

        // Create axes
        var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
        categoryAxis.dataFields.category = "habilidades";
        categoryAxis.renderer.grid.template.location = 0;
        categoryAxis.renderer.minGridDistance = 30;


        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
        valueAxis.min = 0;
        valueAxis.renderer.grid.template.location = 0;

        // Create series
        function createSeries(field, name) {

            // Set up series
            var series = chart.series.push(new am4charts.ColumnSeries());
            series.name = name;
            series.dataFields.valueY = field;
            series.dataFields.categoryX = "habilidades";
            series.sequencedInterpolation = false;

            // Make it stacked
            series.stacked = true;

            // Configure columns
            series.columns.template.width = am4core.percent(60);
            series.columns.template.tooltipText = "[bold]{name}[/]\n[font-size:14px]{categoryX}: {valueY}";

            // Add label
            var labelBullet = series.bullets.push(new am4charts.LabelBullet());
            labelBullet.label.text = "{valueY}";
            labelBullet.locationY = 0.5;
            labelBullet.label.hideOversized = true;

            return series;
        }

        createSeries("europe", "Europe", false);
        createSeries("namerica", "North America", true);
        createSeries("asia", "Asia-Pacific", true);
        createSeries("lamerica", "Latin America", false);
        createSeries("meast", "Middle-East", true);
        createSeries("africa", "Africa", true);

        // Legend
        chart.legend = new am4charts.Legend();
        chart.legend.position = "bottom";
        chart.legend.maxHeight = 60;
        chart.legend.scrollable = true;
        chart.legend.marginBottom = 10;

    }); // end am4core.ready()

    am4core.ready(function () {

        // Themes begin
        am4core.useTheme(am4themes_animated);
        // Themes end

        // Create chart instance
        var chart = am4core.create("chartDivPasatiemposPaises", am4charts.XYChart);
        var title = chart.titles.create();
        title.text = "Pasatiempos por país";
        title.fontSize = 25;
        title.marginBottom = 30;


        // Add data
        chart.data = [{
            "habilidades": "Cantar",
            "europe": 2.5,
            "namerica": 2.5,
            "asia": 2.1,
            "lamerica": 0.3,
            "meast": 0.2,
            "africa": 0.1
        }, {
            "habilidades": "Comer",
            "europe": 2.6,
            "namerica": 2.7,
            "asia": 2.2,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Saltar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Correr",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Bailar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Jugar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }, {
            "habilidades": "Hablar",
            "europe": 2.8,
            "namerica": 2.9,
            "asia": 2.4,
            "lamerica": 0.3,
            "meast": 0.3,
            "africa": 0.1
        }
        ];

        // Create axes
        var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
        categoryAxis.dataFields.category = "habilidades";
        categoryAxis.renderer.grid.template.location = 0;
        categoryAxis.renderer.minGridDistance = 30;


        var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
        valueAxis.min = 0;
        valueAxis.renderer.grid.template.location = 0;

        // Create series
        function createSeries(field, name) {

            // Set up series
            var series = chart.series.push(new am4charts.ColumnSeries());
            series.name = name;
            series.dataFields.valueY = field;
            series.dataFields.categoryX = "habilidades";
            series.sequencedInterpolation = false;

            // Make it stacked
            series.stacked = true;

            // Configure columns
            series.columns.template.width = am4core.percent(60);
            series.columns.template.tooltipText = "[bold]{name}[/]\n[font-size:14px]{categoryX}: {valueY}";

            // Add label
            var labelBullet = series.bullets.push(new am4charts.LabelBullet());
            labelBullet.label.text = "{valueY}";
            labelBullet.locationY = 0.5;
            labelBullet.label.hideOversized = true;

            return series;
        }

        createSeries("europe", "Europe", false);
        createSeries("namerica", "North America", true);
        createSeries("asia", "Asia-Pacific", true);
        createSeries("lamerica", "Latin America", false);
        createSeries("meast", "Middle-East", true);
        createSeries("africa", "Africa", true);

        // Legend
        chart.legend = new am4charts.Legend();
        chart.legend.position = "bottom";
        chart.legend.maxHeight = 60;
        chart.legend.scrollable = true;
        chart.legend.marginBottom = 10;

    }); // end am4core.ready()
</script>
